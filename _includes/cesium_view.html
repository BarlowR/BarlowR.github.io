

<script src="https://cesium.com/downloads/cesiumjs/releases/1.104/Build/Cesium/Cesium.js"></script>
<link href="https://cesium.com/downloads/cesiumjs/releases/1.104/Build/Cesium/Widgets/widgets.css" rel="stylesheet">

<div id="kml_dir">{{ include.kml_file }}</div>
<div id="cesiumContainer"></div>
  <script>
    // Your access token can be found at: https://ion.cesium.com/tokens.
    // This is the default access token from your ion account

    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIzZGY3Mzk4MS1jMmJlLTQyOGEtOWU5Yy03YmQzNGEzNmQ2ZDEiLCJpZCI6MTM2MDgwLCJpYXQiOjE2ODI3MTc1NjJ9.K4F5Qh2whPzLuaNqpZ1SXuTCyWszHHFng2ZrDOy_Rq0';

    // Initialize the Cesium Viewer in the HTML element with the `cesiumContainer` ID.
    const viewer = new Cesium.Viewer('cesiumContainer', {
        animation: false,
        baseLayerPicker: false,
        geocoder: false,
        homeButton: false,
        infoBox: false,
        sceneModePicker: false,
        selectionIndicator: false,
        timeline: false,
        navigationHelpButton: false,
        navigationInstructionsInitiallyVisible: false,
        terrainProvider: Cesium.createWorldTerrain()
    });    

    var kml_file = document.getElementById("kml_dir").innerText;
    if (kml_file != ""){
        const options = {
            camera: viewer.scene.camera,
            canvas: viewer.scene.canvas,
        };

        viewer.dataSources.add(
          Cesium.KmlDataSource.load(
            "content/trips/SkiTraverse.kmz",
            options
          )
        );
    }
    

    // Fly the camera to San Francisco at the given longitude, latitude, and height.
    viewer.camera.flyTo({
      destination : Cesium.Cartesian3.fromDegrees(-122.4175, 37.655, 400),
      orientation : {
        heading : Cesium.Math.toRadians(0.0),
        pitch : Cesium.Math.toRadians(-15.0),
      }
    });

    viewer._cesiumWidget._creditContainer.parentNode.removeChild(
        viewer._cesiumWidget._creditContainer);
  </script>
